# Background and Data Collection

Due to the disparate nature of medication pricing across private healthcare systems throughout the United States, we selected data from the Centers for Medicare and Medicaid Services (CMS).  The data made available by CMS is vast [4] with well over 100 data sets focusing on a wide variety of topics and interests.  

We decided to leverage “The Quarterly Prescription Drug Plan Formulary” data set. Of particular interest were the pricing files, basic drugs formulary files, and plan information files.  We also leveraged the geographic locator file, which enabled us to connect plans and prices back to the county level across the US.  A key consideration and constraint is that Medicare & Medicaid plans and pricing only apply to the particular subset of the population that qualify for Medicare and Medicaid.  To be Medicare eligible, applicants generally must be age 65 or older. In order to get Medicare before age 65, one must have a disability, ESRD (End-Stage Renal Disease), or ALS (Amyotrophic Lateral Sclerosis) [8].  This was ultimately one of the more comprehensive, cohesive, and dynamic data sets available related to medication pricing.  Furthermore, it presented the unique advantage of having prices by plan and by region, which allowed us to pursue analysis that could be contextualized by regional demographics.  The data was easily accessible and downloadable as a zip file.

Several APIs were explored that had general medication data.  In particular, there is now a growing number of online pharmacies that report medication pricing.  Companies such as GoodRx (www.goodrx.com) host an API and are on a mission to help level the playing field for medication prices for consumers, but we would not be able to appropriately pair this with the demographic data we would later select.  

**add some details here about what the formulary is and give better context to the reader**

The ability to pair the medication prices with demographic data was critical to our exploration and analysis.  The goal was to gather insights into how different demographics are impacted by medication pricing variation.  The demographic data selection was much simpler, and we quickly concluded that the US Census would provide compelling county-level demographic information, which we could connect to the medication pricing data.  This would pair in a compelling way with our Medicare Formulary data.  

*elaborate on census data collection**

There is an obvious issue with using the Medicare formulary data as a foundation for pricing, which we mentioned briefly and warrants further discussion.  This data is constrained to a subset of the population.  It is worth considering how Medicare formulary data, specifically Part D coverage, can serve as a functional proxy for medication prices across the US.  First, Medicare Part D covers over 50 million beneficiaries, which makes it one of the largest prescription drug programs in the US.  Medicare contracts with private insurers who then negotiate prices with drug manufacturers and pharmacies, which can reflect real-world pricing.  Medicare has tremendous leverage in the marketplace and is one of the largest purchasers of prescription drugs.  Accordingly, this makes Medicare a substantial market influencer, which means that its pricing can set or anchor prices for the entire marketplace.  We can reasonably infer that uninsured buyers, or buyers leveraging other forms of insurance, would pay at least as much as Medicare under Part D coverage.  Furthermore, since the private insurers are negotiating prices, the prices are expected to generally reflect market competition, rebate structures, and incentives in the local markets in which they are negotiating.  Comparative analysis of regional and county-level formularies offers valuable insights into the overall landscape of drug pricing in the US.

Taking this approach is not without its limitations.  The most significant constraint is the lack of transparency around rebates and negotiated discounts, which means that the net prices might differ from what is publicly listed.  It also does not fully capture negotiations in non-Medicare markets, which could present notable deviations from the information that is available to us.  Accordingly, the pricing that we extracted should not be considered the exact pricing for any particular medication.  Our ability to assess the extent of this is limited since private insurers are not publishing their formulary data.

Another key consideration was the sheer scope of the data we were beginning to assemble.  The formulary files are very large and are published quarterly.  Additionally, the formulary covers pricing for approximately 6336 different medication structures (types, doses, administration) across 796 contracts and 458 plans, for a total of 5644 unique contract/plan combinations.  Complicating it further is that there are also regional formularies under MA (Medicare Advantage, also known as “Part C”) and PDP (Prescription Drug Plan).  As such, we needed a way to streamline our analysis.

Three additional and separate data sets were secured related to spending, also furnished by CMS, which outlined overall spending by drug and by year from 2019 - 2023.  This lacked the geographic granularity to evaluate medications at the county level, but would provide context for which medications could be considered high impact, focusing exploration of the formulary data.  This included spending under Part D, Part B, and Medicaid.  Notably, the formulary data is limited to Part D.  However, the overall spending information would assist in determining which medications are having the greatest impact nationally from a raw cost perspective.  Additionally, the data contained information about the number of beneficiaries, claims filed, and doses.  This allowed assessment of which medications are prescribed less frequently with higher cost, or by contrast, high frequency and low cost.  Integrating this data into the overall database enabled greater flexibility and synthesized well with the other data being compiled.

There was ultimately a significant gap observed upon preliminary exploration of the expanded data set.  The CMS formulary data lacks any type of medication name.  Only NDC (National Drug Code) codes were provided inside the formulary, which were tied to the prices.  This presented a problematic hurdle to the analysis for a litany of reasons.  The overall spending data only provided drug names, not NDC codes, so there was no way to connect the two, and they existed as separate datasets in our database.  Perhaps most importantly, the lack of any medication name created some immediately obvious issues when attempting to discuss and present findings.  Only being able to reference raw codes was simply not a reasonable consideration.  Many other issues were observed, and being able to connect names to NDC codes was immediately prioritized.  Fortunately, the FDA (Food and Drug Administration) publishes comprehensive data sets.  The FDA also publishes a large number of data sets, so securing the information requires evaluating and securing relevant information.  An NDC database file was secured.  This was provided as a zip file.  By itself, this data presented additional challenges regarding how to evaluate and integrate it with the growing project dataset.  It existed essentially as two text files, which contained product and packaging information.  The scope of the project expanded further as each drug was complicated with more context, including packaging and strength levels.

Fortunately, the naming conventions utilized by CMS in their overall spending data were largely consistent with the naming conventions provided by the FDA, which allowed for these files to be related in the database.  The project now had compelling connections across a massive number of very large data files.  The most concerning connection based on string matching between the NDC data and the CMS spending data proved solid and was able to join more than 95% of the medications summarized for Part D spending.
