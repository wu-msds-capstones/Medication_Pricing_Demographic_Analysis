# Results

The plan information, once condensed, could be synthesized into the census information to start evaluating median price and other formulary statistics against the various demographic data available.  An early concern in the development of this project was whether there would even be any price variation.  A common misconception is that Medicare drug prices are the same everywhere, but they vary due to many factors outlined earlier.  The results were surprising.

Drug prices do in fact vary significantly regionally but even within some states.  As is clearly demonstrated in @fig-map-semaglutide, price varies significantly.

```{r}
#| label: fig-map1
#| fig-cap: "Median Medicare Price for 30-day Supply of Semaglutide by US County"
#| warning: false

chosen_drug = "Semaglutide"

# Load libraries
library(tigris)
library(sf)
library(ggplot2)
library(dplyr)

summary_table <- readRDS("data/map_data.rds")

# Use sf-compatible county shapefile (from tigris)
options(tigris_use_cache = TRUE)
counties_sf <- tigris::counties(cb = TRUE, class = "sf")

# Change county_code to FIPS style
# Choose drug of interest
summary_table2 <- summary_table %>%
  mutate(COUNTY_CODE = sprintf("%05s", COUNTY_CODE)) %>%
  filter(drug_name_clean == chosen_drug)

# Join median_cost to county map
counties_joined <- counties_sf %>%
  left_join(summary_table2, by = c("NAME" = "COUNTY", "STUSPS" = "STATE"))

# Define bounding box for continental US
bbox <- st_bbox(c(xmin = -125, xmax = -66, ymin = 23, ymax = 50), crs = st_crs(counties_joined))

# Crop the map
counties_cropped <- st_crop(counties_joined, bbox)

# Plot it
ggplot(counties_cropped) +
  geom_sf(aes(fill = median_cost)) +
  scale_fill_viridis_c(option = "plasma", na.value = "grey90") +
  labs(
    title = paste0("Median Medicare Price for 30-day Supply of ",  chosen_drug, " by US County "),
    fill = "Median Cost"
  ) +
  theme_minimal()
```

![Median Medicare Price for 30-day Supply of Semaglutide by US County](./images/map_semaglutide_727x375.png){#fig-map-semaglutide}

**add plot of another very different price pattern drug**

**we can add a comment about Connecticut here**

Our team was very surprised by what we observed once the median prices were applied to map plots.  There are clearly patterns here, but they vary geographically with different drugs. To see maps for many more drugs, see this [shiny app](https://gpc1.shinyapps.io/shiny_maps_drug_median_price/). 

![Correlation between the number of contract-plan combinations in a county vs the population](./images/number_contract_plans_vs_tot_population.png){#fig-plans-vs-population}


This regional variation underscores the importance of localized analysis. It also raises important questions about equity and accessâ€”particularly for beneficiaries in high-cost areas who may face greater financial burdens for the same treatments available at lower costs elsewhere. These disparities suggest that systemic inefficiencies or market imbalances may be at play, warranting further investigation and policy attention.


